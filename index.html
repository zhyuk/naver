<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>네이버 : 회원가입</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.js"></script>
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="shortcut icon" href="./img/naver/naver-icon.svg">
    <link rel="stylesheet" href="./css/naver/naver.css">
</head>

<body class="pretendard">
    <div id="page_wrap">
        <div class="content_inner">
            <div class="img_content">
                <img src="./img/naver/naver_logo.png" class="main_logo" alt="네이버 텍스트 이미지" title="네이버 메인타이틀 로고"
                    tabindex="1">
            </div>

            <div class="join_check">
                <span tabindex="2">실명 인증된 아이디로 가입</span>
                <i class='far fa-check-circle'></i>
            </div>

            <form id="join_form">
                <table class="join_table title_font">
                    <tr>
                        <td class="userid">
                            <i class="fa fa-user-o icon"></i>
                            <input type="text" id="userid" class="input padding_inner valInput" name="userid"
                                placeholder="아이디">
                            <span class="email_domain">@naver.com</span>
                        </td>
                    </tr>
                    <tr>
                        <td class="password">
                            <i class="material-icons icon">lock_outline</i>
                            <input type="password" id="password" class="input padding_inner valInput" name="password"
                                placeholder="비밀번호">
                            <i class='far fa-eye-slash button'></i>
                        </td>
                    </tr>
                    <tr>
                        <td class="email">
                            <i class="material-icons icon">mail_outline</i>
                            <input type="text" id="email" class="input padding_inner" name="email"
                                placeholder="[선택] 이메일주소 (비밀번호 찾기 등 본인 확인용)">
                        </td>
                    </tr>
                </table>

                <ul class="message1 message"></ul>
                <table class="join_table">
                    <tr>
                        <td class="name">
                            <i class="fa fa-user-o icon"></i>
                            <input type="text" id="name" class="input padding_inner valInput" name="name"
                                placeholder="이름">
                        </td>
                    </tr>
                    <tr>
                        <td class="birth">
                            <i class='far fa-calendar-alt icon'></i>
                            <input type="text" id="birth" class="input padding_inner valInput" name="birth"
                                placeholder="생년월일 8자리">
                        </td>
                    </tr>
                    <tr>
                        <td class="telecom">
                            <i class="material-icons icon">perm_data_setting</i>
                            <button type="button" id="telecom" class="padding_inner telecom_btn">통신사
                                선택</button>
                            <ul class="telecom-list font_white">
                                <li>SKT</li>
                                <li>SKT 알뜰폰</li>
                                <li>KT</li>
                                <li>KT 알뜰폰</li>
                                <li>LG U+</li>
                                <li>LG U+ 알뜰폰</li>
                            </ul>
                            <div class="clear"></div>
                        </td>
                    </tr>
                    <tr>
                        <td class="radio_td">
                            <ul class="gender">
                                <li><input type="radio" id="male" name="gender" value="male">
                                    <label for="male">남자</label>
                                </li>
                                <li><input type="radio" id="female" name="gender" value="female">
                                    <label for="female">여자</label>
                                </li>
                            </ul>

                            <ul class="contry">
                                <li><input type="radio" id="korean" name="contry" value="korean" checked>
                                    <label for="korean">내국인</label>
                                </li>
                                <li><input type="radio" id="forigner" name="contry" value="forigner">
                                    <label for="forigner">외국인</label>
                                </li>
                            </ul>

                            <ul class="sel-gender">
                                <li><input type="radio" id="sel-male" name="sel-gender" value="sel-male">
                                    <label for="sel-male">남자</label>
                                </li>
                                <li><input type="radio" id="sel-female" name="sel-gender" value="sel-female">
                                    <label for="sel-female">여자</label>
                                </li>
                                <li>
                                    <input type="radio" id="sel-none" name="sel-gender" value="sel-none">
                                    <label for="sel-none">선택안함</label>
                                </li>
                            </ul>
                            <div class="clear"></div>
                        </td>
                    </tr>

                    <tr>
                        <td class="contry padding_inner">
                            <i class='fas fa-globe'></i>
                            <select name="sel-con" id="sel-con">
                                <option value="kor" selected>대한민국 +82</option>
                                <option value="dnk">덴마크 +45</option>
                                <option value="deu">독일 +49</option>
                                <option value="esp">스페인 +34</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="number">
                            <i class="material-icons icon">phone_iphone</i>
                            <input type="text" id="number" class="input padding_inner valInput" name="number"
                                placeholder="휴대전화번호">
                        </td>
                    </tr>
                </table>

                <ul class="message message2"></ul>

                <table class="join_table">
                    <tr>
                        <td class="padding_inner">
                            <i class='far fa-check-circle'></i>
                            <input type="checkbox" id="agree" name="agree" value="agree">
                            <label for="agree" class="font_white"><small class="bold font_green
                                ">[필수]</small> 인증 약관동의</label>
                            <button type="button" class="check-btn">∨</button>
                            <ul class="check-list">
                                <li><i class="material-icons">check</i>개인정보 이용</li>
                                <li><i class="material-icons">check</i>고유식별정보 처리</li>
                                <li><i class="material-icons">check</i>통신사 이용약관</li>
                                <li><i class="material-icons">check</i>인증사 이용약관</li>
                                <li><i class="material-icons">check</i>네이버 개인정보 수집</li>
                            </ul>
                        </td>
                    </tr>
                </table>

                <ul class="message message3"></ul>
                <button type="button" id="submitBtn" class="font_white bold padding_inner">인증요청</button>
            </form>
        </div>
    </div>

    <script>
        $(function () {
            // 실명 인증된 아이디로 가입 버튼 기능
            $('.join_check').click(function () {
                // console.log($(this).children('i').css('color'));
                if ($(this).children('i').css('color') == 'rgb(12, 170, 92)') {
                    $(this).children('i').css('color', 'var(--color-gray)');
                    $('td.telecom').hide();
                    $('td.contry').show();
                    $('td.radio_td ul').hide();
                    $('ul.sel-gender').css('display', 'flex');
                } else {
                    $(this).children('i').css('color', 'var(--color-green)');
                    $('td.telecom').show();
                    $('td.contry').hide();
                    $('td.radio_td ul').css('display', 'flex');
                    $('ul.sel-gender').hide();
                }
            })
            // =================================================================

            // 비밀번호 보이기, 감추기 기능
            $('td.password i.button').click(function () {
                // console.log($(this).attr('class'));
                if ($(this).hasClass('fa-eye-slash')) {
                    $(this).removeClass('fa-eye-slash');
                    $(this).addClass('fa-eye');
                    $(this).prev('input').attr('type', 'text');
                } else {
                    $(this).addClass('fa-eye-slash');
                    $(this).removeClass('fa-eye');
                    $(this).prev('input').attr('type', 'password');
                }
            });
            // =================================================================

            // 통신사 선택 기능
            $(".telecom_btn").click(function () {
                $(".telecom-list").toggleClass("active");
                $("td.telecom").toggleClass("active");
            });

            $(".telecom-list li").click(function () {
                $('.telecom_btn').css("color", "white");
                $('.telecom_btn').text($(this).text());
                $(".telecom-list").removeClass("active");
                $('td.telecom').children('i.icon').css('color', 'var(--color-white)');
            });
            // ====================================================

            // 인증 약관 동의 버튼 클릭 기능
            $('label[for="agree"]').click(function () {
                // console.log($(this).prev().prev('i').hasClass('far'));
                if ($(this).prev().prev('i').hasClass('far')) { // 기본값일 때임. 체크안했을때.
                    $(this).prev().prev('i').removeClass('far');
                    $(this).prev().prev('i').addClass('fas');
                    $('.check-list li').each(function (idx, obj) {
                        console.log(idx);
                        $(this).css("color", "var(--color-white)");
                        $(this).children('i').css("color", "var(--color-green)");
                    });
                } else {
                    $(this).prev().prev('i').addClass('far');
                    $(this).prev().prev('i').removeClass('fas');
                    $('.check-list li').each(function (idx, obj) {
                        // console.log(idx);
                        $(this).css("color", "var(--color-gray)");
                        $(this).children('i').css("color", "var(--color-gray)");
                    });
                }
            });
            // =================================================================

            // 인증 약관 동의 펼치는 기능
            $(".check-btn").click(function () {
                $(".check-list").toggleClass("active");
            });

            // 인증 약관 동의 펼쳐졌을 때 기능
            $(".check-list li").click(function () {
                $(this).css("color", "white");
                $(this).children('i').css("color", "var(--color-green)");
            });
            // =================================================================

            // 값 입력 시 아이콘 색 변경
            $("input").on('input', function () {
                if ($(this).val() != '') {
                    $(this).prev('i').css('color', 'var(--color-white)');
                } else {
                    $(this).prev('i').css('color', 'var(--color-gray)');
                }
            });
            // =================================================================

            // 유효성 검사
            let uRegex, selectTarget, result = false;
            let msgObj = {
                userid: '아이디: 5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.',
                password: '비밀번호: 8~16자의 영문 대/소문자, 숫자, 특수문자를 사용해 주세요.',
                name: '이름: 한글, 영문 대/소문자를 사용해 주세요. (특수기호, 공백 사용 불가)',
                birth: '생년월일: 생년월일은 8자리 숫자로 입력해 주세요.',
                number: '휴대전화번호: 휴대전화번호가 정확한지 확인해 주세요.',
                gender: '성별: 성별을 선택해 주세요.'
            };

            document.getElementById('submitBtn').addEventListener('click', validFnc);
            $("input").not("input[name=email]").on('blur', validFncOnce);

            // 인풋태그 벗어나면 실행되는 유효성 검사.
            function validFncOnce() {
                let obj = this;
                console.log(obj);

                selectTarget = $(obj).attr('id');
                console.log(selectTarget);

                let objVal = obj.value;
                // console.log(objVal);

                switch (selectTarget) {
                    case 'userid': uRegex = /^[a-z0-9-_]{5,20}$/g; break;
                    case 'password': uRegex = /^(\w|\W){8,16}$/; break;
                    case 'name': uRegex = /^([a-zA-Z가-힣\s]){2,20}$/; break;
                    case 'birth': uRegex = /^\d{8}$/; break;
                    case 'number': uRegex = /^(010)-?\d{4}-?\d{4}$/; break;
                }

                if (objVal == '') {
                    msgObj = {
                        userid: '아이디: 필수 정보입니다.',
                        password: '비밀번호: 필수 정보입니다.',
                        name: '이름: 필수 정보입니다.',
                        birth: '생년월일: 필수 정보입니다.',
                        number: '휴대전화번호: 필수 정보입니다.',
                        gender: '성별: 성별을 선택해 주세요.'
                    };

                    if (!$('.message1 li').hasClass(selectTarget) && !$('.message2 li').hasClass(selectTarget)) {
                        switch (selectTarget) {
                            case 'userid': $('.message1').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                            case 'password': $('.message1').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                            case 'name': case 'birth': case 'number': $('.message2').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                        }
                        result = false;
                    }
                }
                if (!uRegex.test(objVal)) {
                    if (!$('.message1 li').hasClass(selectTarget) && !$('.message2 li').hasClass(selectTarget)) {
                        switch (selectTarget) {
                            case 'userid': $('.message1').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                            case 'password': $('.message1').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                            case 'name': case 'birth': case 'number': $('.message2').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                        }
                        result = false;
                    }
                    // console.log($('input').attr('id'));
                    // console.log(selectTarget);
                    // console.log($('.message1 li').hasClass(selectTarget));
                } else {
                    $('.message1').children('.' + selectTarget).remove();
                    $('.message2').children('.' + selectTarget).remove();
                    $('.message3').children('.' + selectTarget).remove();
                    $(obj).parent("td").css("border", "1px solid var(--color-gray)");
                    $(obj).removeClass('active');
                    result = true;
                }
                // console.log(result);
                // if (selectTarget = 'number') {
                //     if (!objVal.includes('-')) {

                //         objVal = objVal.slice(0, 3) + '-' + objVal.slice(3, 7) + '-' + objVal.slice(7, 12);
                //         // console.log(objVal.slice(0, 3));
                //         // console.log(objVal.slice(3, 7));
                //         // console.log(objVal.slice(7, 12));
                //     }
                //     $("input[name='number']").text(objVal);
                // }

                // 성별선택
                // function genderChk() {
                //     if (!$("ul.gender").is('[check]')) {
                //         selectTarget = $("ul.gender input").attr('name');
                //         // console.log('selectTarget: ' + selectTarget);
                //         $("ul.gender li label").css('border', 'solid 1px red').css('color', 'red');
                //         // console.log($('.message2 li').hasClass(selectTarget));
                //         if (!$('.message2 li').hasClass(selectTarget)) {
                //             // console.log(msgObj[selectTarget]);
                //             // console.log(msgObj);
                //             $('.message2').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`);
                //         }
                //     } else {
                //         $("ul.gender li label").css('border', 'solid 1px var(--color-gray)').css('color', 'var(--color-gray)');
                //     }
                // }

                // 유효성 충족 시 회원가입
                if ($(this).attr('id') == 'submitBtn') {
                    // genderChk();
                    if (result) alert('회원가입 성공');
                }
            }
            // ==============================================================================

            // 유효성 검사 
            function validFnc() {
                let validInputs = document.querySelectorAll('.valInput');
                // console.log(validInputs);

                validInputs.forEach(function (obj, idx) {
                    selectTarget = $(obj).attr('id');
                    // console.log(selectTarget);

                    let objVal = obj.value;
                    // console.log(objVal);

                    switch (selectTarget) {
                        case 'userid': uRegex = /^[a-z0-9-_]{5,20}$/g; break;
                        case 'password': uRegex = /^(\w|\W){8,16}$/; break;
                        case 'name': uRegex = /^([a-zA-Z가-힣\s]){2,20}$/; break;
                        case 'birth': uRegex = /^\d{8}$/; break;
                        case 'number': uRegex = /^(010)-\d{4}-\d{4}$/; break;
                    }

                    if (objVal == '') {
                        msgObj = {
                            userid: '아이디: 필수 정보입니다.',
                            password: '비밀번호: 필수 정보입니다.',
                            name: '이름: 필수 정보입니다.',
                            birth: '생년월일: 필수 정보입니다.',
                            number: '휴대전화번호: 필수 정보입니다.',
                            gender: '성별: 성별을 선택해 주세요.'
                        };

                        if (!$('.message1 li').hasClass(selectTarget) && !$('.message2 li').hasClass(selectTarget)) {
                            switch (selectTarget) {
                                case 'userid': $('.message1').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                                case 'password': $('.message1').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                                case 'name': case 'birth': case 'number': $('.message2').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                            }
                            result = false;
                        }
                    }
                    if (!uRegex.test(objVal)) {
                        if (!$('.message1 li').hasClass(selectTarget) && !$('.message2 li').hasClass(selectTarget)) {
                            switch (selectTarget) {
                                case 'userid': $('.message1').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                                case 'password': $('.message1').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                                case 'name': case 'birth': case 'number': $('.message2').append(`<li class='${selectTarget}'> ${msgObj[selectTarget]}</li>`); $(obj).addClass('active'); $(obj).parent("td").css("border", "2px solid red"); break;
                            }
                            result = false;
                        }
                        // console.log($('input').attr('id'));
                        // console.log(selectTarget);
                        // console.log($('.message1 li').hasClass(selectTarget));
                    } else {
                        $('.message1').children('.' + selectTarget).remove();
                        $('.message2').children('.' + selectTarget).remove();
                        $('.message3').children('.' + selectTarget).remove();
                        $(obj).parent("td").css("border", "1px solid var(--color-gray)");
                        $(obj).removeClass('active');
                        result = true;
                    }
                    // console.log(result);
                });

                // 유효성 충족 시 회원가입
                if ($(this).attr('id') == 'submitBtn') {
                    // genderChk();
                    if (result) alert('회원가입 성공');
                }
            }
            // =================================================================
        })
    </script>
</body>

</html>